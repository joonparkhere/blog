---
title: OMV 서비스 설정
date: 2020-02-21
pin: false
tags:
- Raspberry Pi
- NAS
---

라즈베리파이 4로 NAS 구축하기 3편, 서비스 세팅입니다.



## 네트워크 서비스 설정

NAS 운용을 위해 OS를 설치하고 HDD 마운트도 마쳤다면, 이제 관련 서비스 설정을 하면 제대로 활용할 수 있게 됩니다.

OMV에서 기본적으로 제공하는 서비스들은 OMV 관리 Web에서 `서비스` 탭에서 확인할 수 있습니다. 제가 사용 설정한 서비스들을 하나씩 설명드리겠습니다.

#### SSH

Secure Shell Protocol로, 네트워크를 통해 라즈베리파이와 통신할 때 보안적으로 안전하게 하기 위해 사용됩니다. 특히나 저는 OMV Lite 버전으로 Cli 환경 밖에 사용하지 못하므로 `SSH`를 통한 원격 접속은 필수입니다. 제가 설치한 대로 OMV를 설치하셨다면 `SSH`는 사용 설정이 되어있을 것입니다.

```bash
ssh [Username]@[Raspberry IP] -p[Port]
```

`cmd`에서 위의 명령어를 통해 혹은 `Putty` 같은 프로그램을 통해 원격 접속을 할 수 있습니다.  기본 `Port`번호는 22번입니다. 이는 보안의 취약점이 될 수 있으므로 OMV Web에서 다른 번호로 바꾸는 것을 권장합니다.

#### FTP

File Transfer Protocol로, 하나의 호스트에서 다른 호스트로 파일을 옮기기 위해 TCP/IP로 제공하는 표준 프로토콜입니다.  운영 중인 시스템에 따라서 최대 전송할 수 있는 파일 크기가 정해져있습니다. 따라서 영화 같은 큰 크기의 파일들을 옮길 때는 종종 오류를 뿜기도 합니다.

<img src="./images/ftp_setting.png" style="zoom: 50%;" /> <img src="./images/ftp_share.png" style="zoom: 50%;" />

OMV Web에서 활성화 후, `공유` 탭에서 사용할 폴더를 설정해주면 해당 공유 폴더에 접근 가능한 계정으로 `FTP` 접근을 할 수 있습니다. [FileZilla](https://filezilla.softonic.kr/)와 같은 프로그램으로 접속할 수 있습니다. 기본 `Port` 번호는 21번입니다. 위와 마찬가지로 널리 알려진 번호이다보니 OMV Web에서 다른 번호로 바꾸는 것을 권장합니다. 추가로, `익명 FTP`를 활성화하면 계정 없이 누구나 IP주소만 알고 있다면 접근할 수 있습니다. 그러나 `FTP`로는 외부 네트워크에서 접근할 수 없습니다. 이를 해결하기 위해 `SFTP`를 사용합니다.

#### SFTP

Secure File Transfer Protocol로, 용어에서도 알 수 있듯이 `SSH`의 암호화 기능이 적용된 파일 전송 프로토콜입니다. 파일을 전송할 때 보안 검증 과정을 거쳐서 기존 프로토콜 대비 속도가 미미하게 낮을 수 있지만 웬만한 경우에는 `SFTP`를 사용하는 것을 권장합니다.

<img src="./images/plugin_sftp.png" style="zoom:67%;" />

OMV에서 기본적으로 제공하지 않으므로 `시스템`-`플러그인`에서 `SFTP`를 검색하면 설치할 수 있습니다. 설치 후 다른 서비스 설정했듯이 활성화하면 됩니다. 마찬가지로 `Port`번호는 기본값이 아닌 다른 번호로 바꾸는 것을 권장합니다.

#### SMB

윈도우 OS를 사용할 경우 `SMB`를 이용하면 내부 HDD처럼 접근할 수 있다는 장점이 있습니다. `FTP`보다는 전송 속도는 느리지만 내부 동일 네트워크에서는 큰 차이가 없기 때문에 편의성 때문에 `SMB`를 많이 이용하곤 합니다. 다른 서비스와 마찬가지로 활성화 후, 공유할 폴더를 설정해주면 이용가능합니다.

<img src="./images/network_drive.png" style="zoom: 80%;" />

그리고 접근할 PC 파일 탐색기 `내 컴퓨터`에서 `네트워크 드라이브 연결`을 눌러서 설정할 수 있습니다.



이로써 라즈베리파이에 마운트된 HDD를 외부에서도 접근할 수 있게 되었습니다. 그러나 지금 설정한 서비스들은 기초적인 기능들을 제공합니다. 조금 더 사용자 입장에서 편리한 애플리케이션들을 도커를 이용해 설치하는 과정을 다음 포스팅에서 설명하겠습니다.













































